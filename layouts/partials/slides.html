<div style="overflow-x: hidden;">
    <div id="swiper">
        <div id="swiper-track">
          {{ $index := 0 }}
          {{ $lastIndex := sub (len (index .Site.Data "slides")) 1 }}
          {{ range .Site.Data.slides }}
              <div class="swiper-item">
                <div class="swiper-content">
                  <div class="card" style="height: 100%;">
                    <div class="card-header">
                      <a href="{{ .project_page }}" class="project-link">
                        <h2>{{ .title }}</h2>
                      </a>
                      <p>{{ .description }}</p>
                    </div>
                    <div class="card-body d-flex justify-content-center align-items-center">
                      {{ if or (eq $index 0) (eq $index 1) (eq $index $lastIndex) }}
                        <video src="{{ .video_path }}" alt="{{ .title }}" autoplay loop muted></video>
                      {{ else }}
                        <video data-src="{{ .video_path }}" alt="{{ .title }}" autoplay loop muted></video>
                      {{ end }}
                    </div>
                  </div>
                </div>
              </div>
              {{ $index = add $index 1 }}
          {{ end }}
        </div>
        <div class="swiper-controller">
        {{ $index := 0 }}
        {{ range .Site.Data.slides }}
            <div class="swiper-button {{ if eq $index 0 }}active{{ end }}" data-index="{{ $index }}" type="button"></div>
            {{ $index = add $index 1 }}
        {{ end }}
      </div>
    </div>
</div>

{{ with resources.Get "matts-swiper.js" | js.Build | minify | fingerprint }}
<script src="{{ .RelPermalink }}" defer></script>
{{ end }}
